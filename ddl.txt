-- Generated by Oracle SQL Developer Data Modeler 20.4.0.374.0801
--   at:        2021-01-20 21:32:07 CET
--   site:      Oracle Database 11g
--   type:      Oracle Database 11g



-- predefined type, no DDL - MDSYS.SDO_GEOMETRY

-- predefined type, no DDL - XMLTYPE

CREATE TABLE cenovnik (
    dat_pv             DATE NOT NULL,
    dat_zv             DATE NOT NULL,
    cena_kat           FLOAT(15),
    kategorija_id_kat  INTEGER NOT NULL
);

ALTER TABLE cenovnik ADD CONSTRAINT cenovnik_pk PRIMARY KEY ( dat_pv );

CREATE TABLE drzava (
    id_drzave   INTEGER NOT NULL,
    naz_drzave  VARCHAR2(30 CHAR) NOT NULL
);

ALTER TABLE drzava ADD CONSTRAINT drzava_pk PRIMARY KEY ( id_drzave );

CREATE TABLE fakultet (
    id_fak   INTEGER NOT NULL,
    naz_fak  VARCHAR2(30 CHAR) NOT NULL
);

ALTER TABLE fakultet ADD CONSTRAINT fakultet_pk PRIMARY KEY ( id_fak );

CREATE TABLE grad (
    id_grada          INTEGER NOT NULL,
    naz_grada         VARCHAR2(35 CHAR) NOT NULL,
    drzava_id_drzave  INTEGER NOT NULL
);

ALTER TABLE grad ADD CONSTRAINT grad_pk PRIMARY KEY ( id_grada,
                                                      drzava_id_drzave );

CREATE TABLE kategorija (
    id_kat   INTEGER NOT NULL,
    tip_kat  VARCHAR2(30 CHAR) NOT NULL
);

ALTER TABLE kategorija ADD CONSTRAINT kategorija_pk PRIMARY KEY ( id_kat );

CREATE TABLE konkurs (
    id_kon   INTEGER NOT NULL,
    dat_kon  DATE NOT NULL,
    id_ss    INTEGER
);

ALTER TABLE konkurs ADD CONSTRAINT konkurs_pk PRIMARY KEY ( id_kon );

CREATE TABLE radnik (
    sifra_rad     INTEGER NOT NULL,
    jmbg_rad      INTEGER NOT NULL,
    ime_rad       VARCHAR2(30 CHAR) NOT NULL,
    prez_rad      VARCHAR2(30 CHAR) NOT NULL,
    dat_rodj_rad  DATE NOT NULL,
    id_ss         INTEGER NOT NULL
    
);



ALTER TABLE radnik ADD CONSTRAINT radnik_pk PRIMARY KEY ( sifra_rad );

CREATE TABLE radnik_u_szuk (
    sifra_rad INTEGER NOT NULL
);

ALTER TABLE radnik_u_szuk ADD CONSTRAINT radnik_u_szuk_pk PRIMARY KEY ( sifra_rad );

CREATE TABLE sluzbasmestaja (
    id_ss      INTEGER NOT NULL,
    rad_vreme  VARCHAR2(1000 CHAR) NOT NULL
);

ALTER TABLE sluzbasmestaja ADD CONSTRAINT sluzbasmestaja_pk PRIMARY KEY ( id_ss );

CREATE TABLE smer (
    sifra_smera  INTEGER NOT NULL,
    naz_smera    VARCHAR2(30) NOT NULL,
    fak_id_fak   INTEGER NOT NULL
);

ALTER TABLE smer ADD CONSTRAINT smer_pk PRIMARY KEY ( sifra_smera,
                                                      fak_id_fak );

CREATE TABLE soba (
    id_sobe     INTEGER NOT NULL,
    sprat_sobe  VARCHAR2(10 CHAR) NOT NULL,
    id_sd       INTEGER NOT NULL
);

ALTER TABLE soba ADD CONSTRAINT soba_pk PRIMARY KEY ( id_sobe );

CREATE TABLE student (
    jmbg_stud             INTEGER NOT NULL,
    ime_stud              VARCHAR2(30 CHAR) NOT NULL,
    prez_stud             VARCHAR2(30 CHAR) NOT NULL,
    dat_rodj_stud         DATE NOT NULL,
    br_ind                VARCHAR2(30 CHAR) NOT NULL,
    god_upisa             INTEGER NOT NULL,
    status_stud           VARCHAR2(30 CHAR) NOT NULL,
    smer_sifra_smera      INTEGER NOT NULL,
    smer_fakultet_id_fak  INTEGER NOT NULL,
    id_grada_ms           INTEGER NOT NULL,
    id_grada_mr           INTEGER NOT NULL,
    id_drzave_ms          INTEGER NOT NULL,
    id_drzave_mr          INTEGER NOT NULL,
    kategorija_id_kat     INTEGER,
    uplata_id_upl         INTEGER NOT NULL
);

ALTER TABLE student ADD CONSTRAINT student_pk PRIMARY KEY ( jmbg_stud );

CREATE TABLE studentskidom (
    id_sd                 INTEGER NOT NULL,
    naziv_sd              VARCHAR2(40 CHAR) NOT NULL,
    sluzbasmestaja_id_ss  INTEGER
);

ALTER TABLE studentskidom ADD CONSTRAINT studentskidom_pk PRIMARY KEY ( id_sd );

CREATE TABLE studiranje (
    fak_id_fak    INTEGER NOT NULL,
    jmbg_student  INTEGER NOT NULL,
    sob_id_sobe   INTEGER
);

CREATE TABLE ucestvovanje (
    konkurs_id_kon   INTEGER NOT NULL,
    fakultet_id_fak  INTEGER NOT NULL
);

ALTER TABLE ucestvovanje ADD CONSTRAINT ucestvuje_pk PRIMARY KEY ( konkurs_id_kon,
                                                                   fakultet_id_fak );

CREATE TABLE uplata (
    id_upl             INTEGER NOT NULL,
    dat_izd_upl        DATE NOT NULL,
    iznos_upl          FLOAT(15) NOT NULL,
    sifra_rad_u_szuk_  INTEGER NOT NULL,
    kate_id_kat        INTEGER NOT NULL
);

ALTER TABLE uplata ADD CONSTRAINT uplata_pk PRIMARY KEY ( id_upl );

CREATE TABLE upravlja (
    sifra_upravnika      INTEGER NOT NULL,
    studentskidom_id_sd  INTEGER NOT NULL
);

ALTER TABLE upravlja ADD CONSTRAINT upravlja_pk PRIMARY KEY ( sifra_upravnika,
                                                              studentskidom_id_sd );

CREATE TABLE upravnik (
    sifra_rad INTEGER NOT NULL
);


ALTER TABLE upravnik ADD CONSTRAINT upravnik_pk PRIMARY KEY ( sifra_rad );

ALTER TABLE cenovnik
    ADD CONSTRAINT cenovnik_kategorija_fk FOREIGN KEY ( kategorija_id_kat )
        REFERENCES kategorija ( id_kat );

ALTER TABLE grad
    ADD CONSTRAINT grad_drzava_fk FOREIGN KEY ( drzava_id_drzave )
        REFERENCES drzava ( id_drzave );

ALTER TABLE konkurs
    ADD CONSTRAINT konkurs_sluzbasmestaja_fk FOREIGN KEY ( id_ss )
        REFERENCES sluzbasmestaja ( id_ss );

ALTER TABLE radnik
    ADD CONSTRAINT radnik_sluzbasmestaja_fk FOREIGN KEY ( id_ss )
        REFERENCES sluzbasmestaja ( id_ss );


ALTER TABLE smer
    ADD CONSTRAINT smer_fakultet_fk FOREIGN KEY ( fak_id_fak )
        REFERENCES fakultet ( id_fak );

ALTER TABLE soba
    ADD CONSTRAINT soba_studentskidom_fk FOREIGN KEY ( id_sd )
        REFERENCES studentskidom ( id_sd );

ALTER TABLE student
    ADD CONSTRAINT student_grad_fk FOREIGN KEY ( id_grada_mr,
                                                 id_drzave_ms )
        REFERENCES grad ( id_grada,
                          drzava_id_drzave );

ALTER TABLE student
    ADD CONSTRAINT student_grad_fkv1 FOREIGN KEY ( id_grada_ms,
                                                   id_drzave_mr )
        REFERENCES grad ( id_grada,
                          drzava_id_drzave );

ALTER TABLE student
    ADD CONSTRAINT student_kategorija_fk FOREIGN KEY ( kategorija_id_kat )
        REFERENCES kategorija ( id_kat );

ALTER TABLE student
    ADD CONSTRAINT student_smer_fk FOREIGN KEY ( smer_sifra_smera,
                                                 smer_fakultet_id_fak )
        REFERENCES smer ( sifra_smera,
                          fak_id_fak );

ALTER TABLE student
    ADD CONSTRAINT student_uplata_fk FOREIGN KEY ( uplata_id_upl )
        REFERENCES uplata ( id_upl );

ALTER TABLE studentskidom
    ADD CONSTRAINT studidom_sluzbasmestaja_fk FOREIGN KEY ( sluzbasmestaja_id_ss )
        REFERENCES sluzbasmestaja ( id_ss );

ALTER TABLE studiranje
    ADD CONSTRAINT studira_fakultet_fk FOREIGN KEY ( fak_id_fak )
        REFERENCES fakultet ( id_fak );

ALTER TABLE studiranje
    ADD CONSTRAINT studira_soba_fk FOREIGN KEY ( sob_id_sobe )
        REFERENCES soba ( id_sobe );

ALTER TABLE studiranje
    ADD CONSTRAINT studira_student_fk FOREIGN KEY ( jmbg_student )
        REFERENCES student ( jmbg_stud );

ALTER TABLE ucestvovanje
    ADD CONSTRAINT ucestvuje_fakultet_fk FOREIGN KEY ( fakultet_id_fak )
        REFERENCES fakultet ( id_fak );

ALTER TABLE ucestvovanje
    ADD CONSTRAINT ucestvuje_konkurs_fk FOREIGN KEY ( konkurs_id_kon )
        REFERENCES konkurs ( id_kon );

ALTER TABLE uplata
    ADD CONSTRAINT uplata_kategorija_fk FOREIGN KEY ( kate_id_kat )
        REFERENCES kategorija ( id_kat );

ALTER TABLE uplata
    ADD CONSTRAINT uplata_radnik_u_szuk_fk FOREIGN KEY ( sifra_rad_u_szuk_ )
        REFERENCES radnik_u_szuk ( sifra_rad );

ALTER TABLE upravlja
    ADD CONSTRAINT upravlja_studentskidom_fk FOREIGN KEY ( studentskidom_id_sd )
        REFERENCES studentskidom ( id_sd );

ALTER TABLE upravlja
    ADD CONSTRAINT upravlja_upravnik_fk FOREIGN KEY ( sifra_upravnika )
        REFERENCES upravnik ( sifra_rad );




-- Oracle SQL Developer Data Modeler Summary Report: 
-- 
-- CREATE TABLE                            18
-- CREATE INDEX                             0
-- ALTER TABLE                             41
-- CREATE VIEW                              0
-- ALTER VIEW                               0
-- CREATE PACKAGE                           0
-- CREATE PACKAGE BODY                      0
-- CREATE PROCEDURE                         0
-- CREATE FUNCTION                          0
-- CREATE TRIGGER                           0
-- ALTER TRIGGER                            0
-- CREATE COLLECTION TYPE                   0
-- CREATE STRUCTURED TYPE                   0
-- CREATE STRUCTURED TYPE BODY              0
-- CREATE CLUSTER                           0
-- CREATE CONTEXT                           0
-- CREATE DATABASE                          0
-- CREATE DIMENSION                         0
-- CREATE DIRECTORY                         0
-- CREATE DISK GROUP                        0
-- CREATE ROLE                              0
-- CREATE ROLLBACK SEGMENT                  0
-- CREATE SEQUENCE                          0
-- CREATE MATERIALIZED VIEW                 0
-- CREATE MATERIALIZED VIEW LOG             0
-- CREATE SYNONYM                           0
-- CREATE TABLESPACE                        0
-- CREATE USER                              0
-- 
-- DROP TABLESPACE                          0
-- DROP DATABASE                            0
-- 
-- REDACTION POLICY                         0
-- 
-- ORDS DROP SCHEMA                         0
-- ORDS ENABLE SCHEMA                       0
-- ORDS ENABLE OBJECT                       0
-- 
-- ERRORS                                   0
-- WARNINGS                                 0
